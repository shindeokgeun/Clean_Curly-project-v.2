{% load static %}

<!-- 회원 정보 수정 필드(수정시 개인 페이지에서 변경)-->
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>개인 페이지</title>
    <link rel="stylesheet" href="{% static 'USERS_마켓_로그인2.css' %}">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="top-links">
            {% if user.is_authenticated %}
                <a href="{% url 'profile' %}" class="link_text">{{ user.username }} 님</a>
                <a href="{% url 'logout' %}" class="link_text">로그아웃</a>
            {% else %}
                <a href="{% url 'signup' %}" class="link_text">회원가입</a>
                <a href="{% url 'login' %}" class="link_text">로그인</a>
            {% endif %}
            <a href="{% url 'cs_index' %}" class="link_text">고객센터</a>
        </div>
        <div class="header-content">
            <a href="/" class="logo">
                <img src="{% static 'images/마켓로고.png' %}" alt="마켓로고">
            </a>
            
            <form class="search-form">
                <div class="search_box">
                    <input type="text" maxlength="225" tabindex="1" placeholder="검색어를 입력하세요">
                    <button type="submit" class="search-button" tabindex="2">
                        <img src="{% static 'images/돋보기 로고.png' %}" alt="검색">
                    </button>
                </div>
            </form>
            
            <div class="icons">
                <a href="#"><img src="{% static 'images/위치.png' %}" alt="위치"></a>
                <a href="#"><img src="{% static 'images/좋아요.png' %}" alt="좋아요"></a>
                <a href="/cart/"><img src="{% static 'images/장바구니.png' %}" alt="장바구니"></a>
            </div>
        </div>

        <nav>
            <div class="nav_items">
                <div class="category-link">
                    <ul>
                        <li>
                            <a href="/">
                                <img src="{% static 'images/카테고리앞.svg' %}"> 카테고리 
                            </a>
                        </li>
                    </ul>                   
                </div>
                <ul>
                    <li><a href="/">신상품</a></li>
                    <li><a href="/">베스트</a></li>
                    <li><a href="/">알뜰쇼핑</a></li>
                    <li><a href="{% url 'benefit_benefit' %}">특가/혜택</a></li>
                </ul>
                <img src="https://res.kurly.com/pc/service/common/1908/delivery_190819.gif" alt="서울, 경기, 인천 샛별배송, 수도권 이외 지역 택배배송" class="bnr_delivery_img">
            </div>
        </nav>
    </header>
    
    <main>
        <h1>개인 페이지</h1>
        <section class="profile-section">
            <!-- 프로필 사진 -->
            <div class="profile-picture">
                {% if user.profile_picture %}
                    <img src="{{ user.profile_picture.url }}" alt="프로필 사진">
                {% else %}
                    <img src="{% static 'images/default_profile.png' %}" alt="프로필 사진">
                {% endif %}
            </div>
    
            <!-- 정보 수정 폼 -->
            <form action="{% url 'profile_edit' %}" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="profile-info">
                    <!-- 비필드 오류 메시지 -->
                    {% if form.non_field_errors %}
                        <div class="error-message">
                            {{ form.non_field_errors.as_text }}
                        </div>
                    {% endif %}
    
                    <!-- 프로필 사진 변경 -->
                    <label for="profile_picture">프로필 사진:</label>
                    <input type="file" id="profile_picture" name="profile_picture">
    
                    <!-- 아이디 (수정 불가) -->
                    <p><strong>아이디:</strong></p>
                    <input type="text" id="username" name="username" value="{{ user.username }}" disabled>
    
                    <!-- 이메일 수정 -->
                    <p><strong>이메일:</strong></p>
                    <input type="email" id="email" name="email" value="{{ user.email }}" required>
    
                    <!-- 전화번호 수정 -->
                    <p><strong>전화번호:</strong></p>
                    <input type="tel" id="phone_number" name="phone_number" value="{{ user.phone_number }}" required>
    
                    <!-- 주소 수정 -->
                    <p><strong>주소:</strong></p>
                    <input type="text" id="address" name="address" value="{{ user.address }}" required>
    
                    <!-- 생년월일 수정 -->
                    <p><strong>생년월일:</strong></p>
                    <input type="date" id="date_of_birth" name="date_of_birth" value="{{ user.date_of_birth }}" required>
    
                    <!-- 현재 비밀번호 -->
                    <p><strong>현재 비밀번호:</strong></p>
                    <input type="password" id="current_password" name="current_password" required>
    
                    <!-- 새 비밀번호 -->
                    <p><strong>새 비밀번호:</strong></p>
                    <input type="password" id="password" name="password">
    
                    <!-- 새 비밀번호 확인 -->
                    <p><strong>새 비밀번호 확인:</strong></p>
                    <input type="password" id="confirm_password" name="confirm_password">
    
                    <button type="submit" class="submit-button">정보 수정</button>
                </div>
            </form>
        </section>
        
        <!-- 로그아웃 버튼 -->
        <form action="{% url 'logout' %}" method="post">
            {% csrf_token %}
            <button type="submit" class="submit-button logout-button">로그아웃</button>
        </form>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer__contents">
            <div class="footer__cs" role="complementary">
                <h2 class="footer__cs__title">고객행복센터</h2>
                <div class="footer__cs__info">
                    <span class="cs__infoNumber">1644-1107</span>
                    <span class="cs__infoTime">월~토요일 오전 7시 - 오후 6시</span>
                </div>
                <div class="footer__cs__inquiry">
                    <div class="cs__inquiryKaKao">
                        <button class="cs__inquiry__button" type="button">
                            카카오톡 문의
                        </button>
                        <div class="cs__inquiry__description">
                            <span> 월~토요일 | 오전 7시 - 오후 6시 </span>
                            <span>일/공휴일 | 오전 7시 - 오후 1시</span>
                        </div>
                    </div>
                    <div class="cs__inquiry1to1">
                        <button class="cs__inquiry__button" type="button">
                            1:1 문의
                        </button>
                        <div class="cs__inquiry__description">
                            <span>365일</span>
                            <span>고객센터 운영시간에 순차적으로 답변드리겠습니다.</span>
                        </div>
                    </div>
                    <div class="cs__inquiryBulk">
                        <button class="cs__inquiry__button" type="button">
                            대량주문 문의
                        </button>
                        <div class="cs__inquiry__description">
                            <span>월~금요일 | 오전9시 - 오후 6시</span>
                            <span>점심시간 | 낮 12시 - 오후 1시</span>
                        </div>
                    </div>
                </div>
                <div class="footer__cs__nonMember">
                    <span>
                        비회원 문의:
                        <a href="mailto:help@karlycorp.com" class="primary">help@karlycorp.com</a>
                    </span>
                    <span>
                        비회원 대량주문 문의:
                        <a href="mailto:help@karlycorp.com" class="primary">help@karlycorp.com</a>
                    </span>
                </div>
            </div>
            <div class="footer__about" role="complementary">
                <ul class="footer__about__list">
                    <li class="about__item">
                        <a href="#" class="about__link">칼리소개</a>
                    </li>
                    <li class="about__item">
                        <a href="#" class="about__link">칼리소개영상</a>
                    </li>
                    <li class="about__item">
                        <a href="#" class="about__link">인재채용</a>
                    </li>
                    <li class="about__item">
                        <a href="#" class="about__link">이용약관</a>
                    </li>
                    <li class="about__item">
                        <a href="#" class="about__link">개인정보처리방침</a>
                    </li>
                    <li class="about__item">
                        <a href="#" class="about__link">고객센터</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="footer__copyright">
            <span>&copy; 2024 Karly Corp. All rights reserved.</span>
        </div>
    </footer>
</body>
</html>
